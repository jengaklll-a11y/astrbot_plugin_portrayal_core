æ²¡é—®é¢˜ï¼Œè¿™æ˜¯ä¸ºæ‚¨æ ¹æ®æœ€æ–°é‡æ„ä»£ç å’Œ `metadata.yaml` ä¿¡æ¯ç¼–å†™çš„å®Œæ•´ `README.md` æ–‡ä»¶ã€‚è¯·ç›´æ¥å¤åˆ¶ä½¿ç”¨ï¼š

```markdown
<div align="center">

![:name](https://count.getloli.com/@astrbot_plugin_portrayal_core?name=astrbot_plugin_portrayal_core&theme=minecraft&padding=6&offset=0&align=top&scale=1&pixelated=1&darkmode=auto)

# AstrBot Plugin Portrayal Core

_âœ¨ [AstrBot](https://github.com/Soulter/AstrBot) æ·±åº¦äººç‰©ç”»åƒæ’ä»¶ (Core é‡æ„ç‰ˆ) âœ¨_  

[![License](https://img.shields.io/badge/License-MIT-green.svg)](https://opensource.org/licenses/MIT)
[![Python 3.10+](https://img.shields.io/badge/Python-3.10%2B-blue.svg)](https://www.python.org/)
[![AstrBot](https://img.shields.io/badge/AstrBot-3.4%2B-orange.svg)](https://github.com/Soulter/AstrBot)
[![GitHub](https://img.shields.io/badge/ä½œè€…-jengaklll--a11y-blue)](https://github.com/jengaklll-a11y)

</div>

## ğŸ’¡ ä»‹ç»

**äººç‰©ç”»åƒ(Core)** æ˜¯ä¸€æ¬¾åŸºäº AstrBot çš„æç®€ç‰ˆç¾¤å‹æ€§æ ¼åˆ†ææ’ä»¶ã€‚

å®ƒé€šè¿‡å›æº¯ç¾¤èŠå†å²è®°å½•ï¼Œåˆ©ç”¨æŒ‡å®šçš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æ·±åº¦åˆ†æç›®æ ‡ç¾¤å‹çš„æ€§æ ¼ç‰¹è´¨ï¼ˆMBTIã€è¡Œæ–‡é£æ ¼ã€æ½œåœ¨èŒä¸šç­‰ï¼‰ï¼Œå¹¶ç”Ÿæˆé«˜æ¸…çš„åˆ†æå¡ç‰‡ã€‚

**ğŸ”¥ Core ç‰ˆæœ¬ç‰¹æ€§ï¼š**
- **ğŸ’ é«˜æ¸…ç”»è´¨æ¸²æŸ“**ï¼šå†…ç½® HTML æ ·å¼å¢å¼ºï¼Œç”Ÿæˆçš„åˆ†æå¡ç‰‡æ¸…æ™°é”åˆ©ï¼Œé€‚é…ç§»åŠ¨ç«¯é˜…è¯»ã€‚
- **ğŸ¤– æŒ‡å®šæ¨¡å‹åˆ†æ**ï¼šæ”¯æŒç‹¬ç«‹é…ç½®ç”¨äºåˆ†æçš„ LLM æ¨¡å‹ï¼ˆå¦‚ä½¿ç”¨æ“…é•¿é•¿æ–‡æœ¬çš„æ¨¡å‹ï¼‰ï¼Œä¸å ç”¨å¯¹è¯é»˜è®¤æ¨¡å‹ã€‚
- **ğŸ§¹ æ™ºèƒ½ä¸Šä¸‹æ–‡è·å–**ï¼šè‡ªåŠ¨è¿‡æ»¤æ— æ•ˆä¿¡æ¯ï¼Œç²¾å‡†æå–ç›®æ ‡ç”¨æˆ·çš„çº¯æ–‡æœ¬å‘è¨€ã€‚
- **ğŸ›¡ï¸ ç¨³å¥çš„å¼•ç”¨å›å¤**ï¼šå›¾ç‰‡æ¨¡å¼ä¸‹è‡ªåŠ¨å¼•ç”¨åŸæ–‡ï¼Œæ‹’ç»åˆ·å±ï¼Œä½“éªŒä¸æ»‘ã€‚
- **âš™ï¸ çµæ´»çš„å¼€å…³æ§åˆ¶**ï¼šæ”¯æŒçº¯æ–‡æœ¬/å›¾ç‰‡æ¨¡å¼åˆ‡æ¢ï¼Œæ”¯æŒè‡ªåŠ¨é™çº§å›é€€ã€‚

## ğŸ“¦ å®‰è£…

### æ–¹æ³•ä¸€ï¼šæ’ä»¶å¸‚åœºå®‰è£…
åœ¨ AstrBot ç®¡ç†é¢æ¿çš„â€œæ’ä»¶â€é¡µé¢æœç´¢ `astrbot_plugin_portrayal_core` è¿›è¡Œå®‰è£…ã€‚

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å®‰è£…
```bash
# è¿›å…¥æ’ä»¶ç›®å½•
cd /AstrBot/data/plugins
# å…‹éš†ä»“åº“
git clone [https://github.com/jengaklll-a11y/astrbot_plugin_portrayal_core](https://github.com/jengaklll-a11y/astrbot_plugin_portrayal_core)
# é‡å¯ AstrBot

```

## âš™ï¸ é…ç½®è¯´æ˜

è¯·åœ¨ AstrBot ç®¡ç†é¢æ¿ -> æ’ä»¶ -> `astrbot_plugin_portrayal_core` -> é…ç½® ä¸­è¿›è¡Œè®¾ç½®ã€‚

| é…ç½®é¡¹ | ç±»å‹ | è¯´æ˜ | é»˜è®¤å€¼ |
| --- | --- | --- | --- |
| `llm_provider_id` | String | **[æ ¸å¿ƒ]** æŒ‡å®šç”¨äºåˆ†æçš„æ¨¡å‹ IDã€‚ç•™ç©ºåˆ™ä½¿ç”¨å½“å‰ä¼šè¯çš„æ¨¡å‹ã€‚<br>

<br>*(å¦‚å¡« `openai_gpt4`ï¼Œå¯æŸ¥çœ‹åå°æ—¥å¿—è·å–å‡†ç¡® ID)* | `""` |
| `enable_image_output` | Bool | **[æ ¸å¿ƒ]** æ˜¯å¦ç”Ÿæˆå›¾ç‰‡å¡ç‰‡ã€‚å¼€å¯åå°†å‘é€é«˜æ¸…æ¸²æŸ“å›¾ï¼Œå…³é—­åˆ™å‘é€ Markdown æ–‡æœ¬ã€‚ | `false` |
| `max_msg_count` | Int | åˆ†ææ—¶ä½¿ç”¨çš„æœ€å¤§æ¶ˆæ¯æ¡æ•°é™åˆ¶ï¼ˆè¶Šå¤šè¶Šå‡†ï¼Œä½†ä¹Ÿè¶Šæ¶ˆè€— Tokenï¼‰ã€‚ | `500` |
| `max_query_rounds` | Int | é»˜è®¤å›æº¯å†å²æ¶ˆæ¯çš„è½®æ•°ï¼ˆæ¯è½®çº¦ 100 æ¡ï¼‰ã€‚ | `20` |
| `system_prompt_template` | Text | è‡ªå®šä¹‰ LLM çš„ç³»ç»Ÿæç¤ºè¯æ¨¡æ¿ï¼Œæ”¯æŒ `{nickname}` å’Œ `{gender}` å˜é‡ã€‚ | (è§é»˜è®¤é…ç½®) |

## âŒ¨ï¸ ä½¿ç”¨æŒ‡ä»¤

**åŸºæœ¬è¯­æ³•ï¼š**
`/ç”»åƒ [å¯é€‰: @æŸäºº] [å¯é€‰: å›æº¯è½®æ•°]`

| æŒ‡ä»¤ç¤ºä¾‹ | è¯´æ˜ |
| --- | --- |
| `/ç”»åƒ` | åˆ†æ**å‘é€è€…è‡ªå·±**çš„æ€§æ ¼ç”»åƒï¼ˆä½¿ç”¨é»˜è®¤å›æº¯è½®æ•°ï¼‰ã€‚ |
| `/ç”»åƒ @å¼ ä¸‰` | åˆ†æç¾¤å‹ **@å¼ ä¸‰** çš„æ€§æ ¼ç”»åƒã€‚ |
| `/ç”»åƒ 50` | åˆ†æ**è‡ªå·±**ï¼Œä½†å¼ºåˆ¶å›æº¯æœ€è¿‘ **50è½®** æ¶ˆæ¯ï¼ˆæ·±åº¦åˆ†æï¼‰ã€‚ |
| `/ç”»åƒ @æå›› 10` | åˆ†æ **@æå››**ï¼Œä»…å›æº¯æœ€è¿‘ **10è½®** æ¶ˆæ¯ï¼ˆå¿«é€Ÿåˆ†æï¼‰ã€‚ |

> **æç¤º**ï¼šç”Ÿæˆçš„å›¾ç‰‡ä¼šè‡ªåŠ¨å¼•ç”¨ä½ çš„æŒ‡ä»¤æ¶ˆæ¯ï¼Œä¸ä¼šè‰¾ç‰¹æ‰“æ‰°ä½ ã€‚

## ğŸ› ï¸ å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆæç¤º "æœªæ‰¾åˆ°å¯ç”¨çš„ LLM æœåŠ¡"ï¼Ÿ**
A: è¯·æ£€æŸ¥ AstrBot æ˜¯å¦é…ç½®äº†æ¨¡å‹æä¾›å•†ã€‚å¦‚æœä½ åœ¨æ’ä»¶é…ç½®ä¸­å¡«å†™äº† `llm_provider_id`ï¼Œè¯·ç¡®ä¿è¯¥ ID æ˜¯å‡†ç¡®çš„ï¼ˆæ’ä»¶å¯åŠ¨æ—¶ä¼šåœ¨åå°æ—¥å¿—æ‰“å°æ‰€æœ‰å¯ç”¨æ¨¡å‹çš„ IDï¼‰ã€‚

**Q: å›¾ç‰‡å‘é€å¤±è´¥ï¼Œè½¬ä¸ºçº¯æ–‡æœ¬äº†ï¼Ÿ**
A: æ’ä»¶å†…ç½®äº†è‡ªåŠ¨é™çº§æœºåˆ¶ã€‚å¦‚æœæœåŠ¡å™¨ç½‘ç»œåŸå› å¯¼è‡´å›¾ç‰‡æ— æ³•ä¸Šä¼ æˆ–æ¸²æŸ“å¤±è´¥ï¼Œä¼šè‡ªåŠ¨å‘é€æ–‡æœ¬ç»“æœï¼Œç¡®ä¿ä½ ä¸€å®šèƒ½æ”¶åˆ°å›å¤ã€‚

**Q: å¦‚ä½•è®©å›¾ç‰‡æ›´æ¸…æ™°ï¼Ÿ**
A: æœ¬æ’ä»¶å·²å†…ç½®é«˜æ¸…ä¼˜åŒ–é€»è¾‘ï¼ˆå¼ºåˆ¶ 22px å­—å·æ¸²æŸ“ï¼‰ã€‚å¦‚æœä»ç„¶è§‰å¾—æ¨¡ç³Šï¼Œè¯·æ£€æŸ¥ AstrBot æœ¬èº«çš„ç»˜å›¾æœåŠ¡é…ç½®ã€‚

## ğŸ“œ å¼€æºåè®®

[MIT License](https://www.google.com/search?q=LICENSE)

```

```
